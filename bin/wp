if [ -z "$APP_PATH" ]; then
  echo "Error: APP_PATH is undefined; Studio's bundled \`wp-cli\` is only usable in shell sessions originating from Studio's \"Open in Terminal\" feature."
  exit 1
fi

COMMAND=$(printf '%q ' "$@")
CLI="wp $COMMAND"
# Mimic core `wp-cli`'s behavior of using `less` for `help` output.
PAGER=$(if [ -z "$COMMAND" ] || [[ "$COMMAND" == help* ]]; then echo "less -R"; else echo "cat"; fi)

"$APP_PATH" --cli="$CLI" | $PAGER
